<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="stock.MovesListRenderer.RecordRow" t-inherit-mode="primary" t-inherit="web.ListRenderer.RecordRow">
        <xpath expr="//tr/t[1]" position="inside">
            <t t-if="column.type === 'opendetailsop'">
                <td class="o_data_cell cursor-pointer o_list_button">
                    <t t-if="record.resModel === 'stock.move' &amp;&amp; record.data?.show_details_visible">
                        <button name="Open Move" class="btn btn-link fa fa-list" t-on-click="() => props.openRecord(record)"/>
                    </t>
                </td>
            </t>
        </xpath>
    </t>
    <t t-name="stock.MoveProductLabelField">
        <t t-if="props.readonly">
            <t t-if="!isProductClickable">
                <span t-if="productName" t-ref="productNodeRef" class="d-flex align-items-center justify-content-between w-100">
                    <span class="text-truncate">
                        <t t-out="productName"/>
                    </span>
                </span>
                <span t-if="!productName and (columnIsProductAndLabel.value and !label)" t-ref="productNodeRef" class="d-flex align-items-center justify-content-between text-muted">
                    <span class="text-truncate">Search a product</span>
                </span>
                <textarea t-if="columnIsProductAndLabel.value and label"
                    class="o_input d-print-none text-wrap border-0 fst-italic"
                    rows="1"
                    type="text"
                    t-att-value="label"
                    t-on-change="(ev) => this.updateLabel(ev.target.value)"
                    t-ref="labelNodeRef"
                />
            </t>
            <t t-else="">
                <div class="d-flex align-items-start justify-content-between"
                     t-attf-style="margin-bottom: {{!nonDraftTextareaVisible and '-21px' or '0px'}};">
                    <a t-if="(columnIsProductAndLabel.value and value) or (!columnIsProductAndLabel.value and (productName or (!productName and !label)))"
                        class="d-flex align-items-center justify-content-between"
                        t-attf-class="o_form_uri #{classFromDecoration}"
                        t-att-href="value ? `#id=${value[0]}&amp;model=${relation}` : '#'"
                        t-on-click.prevent="onClick"
                    >
                        <span t-ref="productNodeRef" class="w-100">
                            <span t-esc="productName" class="text-truncate"/>
                        </span>
                    </a>
                    <button t-if="columnIsProductAndLabel.value and !label and !doneOrCancelled"
                            class="btn fa fa-bars text-start o_external_button"
                            data-tooltip="Click or press enter to add a description"
                            id="labelVisibilityButtonId"
                            type="button"
                            t-on-click="switchLabelVisibility"
                    />
                </div>
                <textarea t-if="nonDraftTextareaVisible"
                    class="o_input d-print-none text-wrap border-0 fst-italic"
                    placeholder="Enter a description"
                    t-att-readonly="recordState === 'done'"
                    rows="1"
                    type="text"
                    t-att-value="label"
                    t-on-change="(ev) => this.updateLabel(ev.target.value)"
                    t-ref="labelNodeRef"
                />
            </t>
        </t>
        <t t-else="">
            <div class="d-flex align-items-center justify-content-between">
                <Many2XAutocomplete t-props="Many2XAutocompleteProps"/>
                <button t-if="hasExternalButton"
                        aria-label="Internal link"
                        class="btn btn-link text-action oi o_external_button px-2"
                        data-tooltip="Internal link"
                        draggable="false"
                        tabindex="-1"
                        type="button"
                        t-att-class="env.inDialog ? 'oi-launch' : 'oi-arrow-right'"
                        t-on-click="onExternalBtnClick"
                />
                <button t-if="hasBarcodeButton"
                        aria-label="Scan barcode"
                        class="btn ms-3 o_barcode o_external_button px-2"
                        data-tooltip="Scan barcode"
                        draggable="false"
                        tabindex="-1"
                        title="Scan barcode"
                        type="button"
                        t-on-click="onBarcodeBtnClick"
                />
                <button t-if="columnIsProductAndLabel.value and !label"
                        class="btn fa fa-bars text-start o_external_button"
                        data-tooltip="Click or press enter to add a description"
                        id="labelVisibilityButtonId"
                        type="button"
                        t-on-click="switchLabelVisibility"
                />
            </div>
            <textarea t-if="columnIsProductAndLabel.value and (label or labelVisibility.value)"
                class="o_input d-print-none text-wrap border-0 fst-italic"
                placeholder="Enter a description"
                rows="1"
                type="text"
                t-att-value="label"
                t-on-change="(ev) => this.updateLabel(ev.target.value)"
                t-ref="labelNodeRef"
            />
        </t>
    </t>
</templates>
